description: The DRP pipeline specialized for the VIRCAM instrument
instrument: lsst.obs.vista.VIRCAM
imports:
  - $PIPE_TASKS_DIR/pipelines/DRP.yaml
tasks:
  isr: lsst.obs.vista.VircamIsrTask
  singleFrame:
    subset:
      - isr
      - characterizeImage
      - calibrate
      - writeSourceTable
      - transformSourceTable
      - consolidateSourceTable
      - consolidateVisitSummary
      - makeCcdVisitTable
      - makeVisitTable
    description: >
      Set of tasks for complete single frame processing. Analogous to
      SingleFrameDriver. isr swapped with vircamIsr to include confidence maps.
  coaddDetect:
    subset:
      - makeWarp
      - assembleCoadd
      - healSparsePropertyMaps
      - detection
    description: >
      A set of tasks to run when coadding images. Adding detection to typical run.
  multiVisitLater:
    subset:
      #- makeWarp
      #- assembleCoadd
      #- healSparsePropertyMaps # needs visit info
      #- detection #use public HSC detections and run separately on VIRCAM
      - mergeDetections
      - deblend
      - measure # needs visit src catalogues if propagating flags
      - mergeMeasurements
      #- forcedPhotCcd # needs CCD exposures
      - forcedPhotCoadd
      - writeObjectTable
      - transformObjectTable
      - consolidateObjectTable
    description: >
      Later parts of multivisit to be conducted following importation of HSC/LSST deepCoadds during VISTA VIRCAM joint processing.
